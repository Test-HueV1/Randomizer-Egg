-- Simple GUI Menu Example + ESP Egg Preview (with Scrolling buttons + Close Button)
-- Place this LocalScript inside StarterGui

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Change if your eggs are in another folder
local EggFolder = Workspace:FindFirstChild("GardenEggs")

-- Clear old GUIs (if respawned)
if PlayerGui:FindFirstChild("CustomMenu") then
	PlayerGui.CustomMenu:Destroy()
end

-- Utility: find first BasePart inside a model (recurses)
local function findBasePart(model)
	for _, d in pairs(model:GetDescendants()) do
		if d:IsA("BasePart") then
			return d
		end
	end
	return nil
end

-- UI objects
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local ToggleButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local Title = Instance.new("TextLabel")
local NotificationFrame = Instance.new("Frame")
local NotificationLabel = Instance.new("TextLabel")
local ButtonHolder = Instance.new("ScrollingFrame")
local Layout = Instance.new("UIListLayout")
local Padding = Instance.new("UIPadding")

-- ScreenGui setup
ScreenGui.Name = "CustomMenu"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

-- Menu Frame
Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
Frame.Position = UDim2.new(0.05, 0, 0.2, 0)
Frame.Size = UDim2.new(0, 200, 0, 320)
Frame.Visible = true

-- Title
Title.Parent = Frame
Title.Size = UDim2.new(1, -40, 0, 40)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
Title.Text = "Randomizer Egg"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20

-- Close Button (inside frame, top-right corner)
CloseButton.Parent = Frame
CloseButton.Size = UDim2.new(0, 40, 0, 40)
CloseButton.Position = UDim2.new(1, -40, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(120, 0, 0)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 20

CloseButton.MouseButton1Click:Connect(function()
	Frame.Visible = false
end)

-- ButtonHolder (scroll area for buttons)
ButtonHolder.Parent = Frame
ButtonHolder.BackgroundTransparency = 1
ButtonHolder.Size = UDim2.new(1, 0, 1, -40)
ButtonHolder.Position = UDim2.new(0, 0, 0, 40)
ButtonHolder.ScrollBarThickness = 6
ButtonHolder.CanvasSize = UDim2.new(0, 0, 0, 0)
ButtonHolder.AutomaticCanvasSize = Enum.AutomaticSize.Y

-- Layout
Layout.Parent = ButtonHolder
Layout.SortOrder = Enum.SortOrder.LayoutOrder
Layout.Padding = UDim.new(0, 5)

-- Padding
Padding.Parent = ButtonHolder
Padding.PaddingLeft = UDim.new(0, 5)
Padding.PaddingRight = UDim.new(0, 5)
Padding.PaddingTop = UDim.new(0, 5)

-- Toggle Button (top-left corner of screen)
ToggleButton.Parent = ScreenGui
ToggleButton.Size = UDim2.new(0, 80, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0, 10)
ToggleButton.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
ToggleButton.Text = "Menu"
ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleButton.Font = Enum.Font.SourceSansBold
ToggleButton.TextSize = 18

ToggleButton.MouseButton1Click:Connect(function()
	Frame.Visible = not Frame.Visible
end)

-- Notification Frame (bottom-right)
NotificationFrame.Parent = ScreenGui
NotificationFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
NotificationFrame.BackgroundTransparency = 0.3
NotificationFrame.Size = UDim2.new(0, 250, 0, 50)
NotificationFrame.Position = UDim2.new(1, -260, 1, -60)
NotificationFrame.Visible = false

NotificationLabel.Parent = NotificationFrame
NotificationLabel.Size = UDim2.new(1, -10, 1, -10)
NotificationLabel.Position = UDim2.new(0, 5, 0, 5)
NotificationLabel.BackgroundTransparency = 1
NotificationLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NotificationLabel.Font = Enum.Font.SourceSansBold
NotificationLabel.TextSize = 18
NotificationLabel.Text = ""

local function showNotification(message)
	NotificationLabel.Text = message
	NotificationFrame.Visible = true
	task.delay(2, function()
		NotificationFrame.Visible = false
	end)
end

-- Function to create buttons inside ButtonHolder
local function createButton(name, text, order, callback)
	local btn = Instance.new("TextButton")
	btn.Name = name
	btn.Parent = ButtonHolder
	btn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
	btn.Size = UDim2.new(1, -10, 0, 40)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 18
	btn.Text = text
	btn.LayoutOrder = order

	local toggled = false
	btn.MouseButton1Click:Connect(function()
		toggled = not toggled
		if toggled then
			btn.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
		else
			btn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
		end

		local ok, err = pcall(callback, btn, toggled)
		if not ok then
			warn("Button callback error for", name, ":", err)
		end

		showNotification(text .. (toggled and " ON" or " OFF"))
	end)

	return btn
end

-- (âœ… keep the same buttons & ESP code you already have, just call createButton like before)
